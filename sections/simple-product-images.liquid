{%- style -%}
  .section-{{ section.id }}-padding {
    padding-top: {{ section.settings.padding_top | times: 0.75 | round: 0 }}px;
    padding-bottom: {{ section.settings.padding_bottom | times: 0.75 | round: 0 }}px;
  }
  .section-{{ section.id }}-padding h2 {
    margin-bottom: {{ section.settings.margin_bottom }}px;

  }
  .section-{{ section.id }}-padding .page-width {
    position: relative;
  }

  @media screen and (min-width: 750px) {
    .section-{{ section.id }}-padding .bg {
      padding-left: 35px;
    padding-right: 35px;
    }
    .section-{{ section.id }}-padding {
      padding-top: {{ section.settings.padding_top }}px;
      padding-bottom: {{ section.settings.padding_bottom }}px;
    }
  }
{%- endstyle -%}

<div class="simple-product-images  section-{{ section.id }}-padding" >
    <div class=" page-width">
      <div class="">
        <div class="relative">
            <div class="images">
                {% for image in product.images %}
                    <div>
                        <img src="{{ image.src | image_url:  width: 2048 }}">
                    </div>
                {% endfor %}
            </div>
            <div class="info" data-tooltip="{{ section.settings.tooltip }}" data-flow="top">
                <svg height="18" viewBox="0 0 18 18" width="18" xmlns="http://www.w3.org/2000/svg"><path d="m103.636647 711.23666c-4.9627995 0-9.0000005 4.037201-9.0000005 9s4.037201 9 9.0000005 9c4.962799 0 9-4.037201 9-9s-4.037201-9-9-9zm0 3.750046c.414047 0 .749954.335907.749954.749954s-.335907.749954-.749954.749954c-.414048 0-.749955-.335907-.749955-.749954s.335907-.749954.749955-.749954zm1.6875 10.499908h-3.375c-.414734 0-.749955-.335907-.749955-.749954s.335221-.749954.749955-.749954h.937545v-4.5h-.5625c-.414734 0-.750091-.336044-.750091-.750092 0-.41391.335357-.749954.750091-.749954h1.312455c.414733 0 .749954.336044.749954.749954v5.250092h.937546c.414733 0 .749954.335907.749954.749954s-.335221.749954-.749954.749954z" fill="#a7a4a1" transform="translate(-94.636647 -711.23666)"/></svg>
            </div>
            <div class="btn white" id="button-{{ section.id }}">
                <svg height="14.5" viewBox="0 0 14.4998731 14.5" width="14.499873" xmlns="http://www.w3.org/2000/svg"><g transform="matrix(-1 0 0 -1 14.499872 14.5)"><path d="m3.5520249.888014v-.888014h-3.10802179c-.24522847 0-.44400311.19877638-.44400311.444007v3.10804899h.88800623v-2.03799212l4.12478891 4.12482502.62604439-.62604987-4.12478892-4.12482502z"/><path d="m14.05587 0h-3.1080218v.888014h2.0379743l-4.12478895 4.12482502.62604438.62604987 4.12478897-4.12482502v2.03799212h.8880062v-3.10804899c0-.24523062-.1987747-.444007-.4440031-.444007z"/><path d="m13.6118669 12.9859361-4.12478897-4.12482499-.62604438.62604987 4.12478895 4.12482502h-2.0379743v.888014h3.1080218c.2452284 0 .4440031-.1987764.4440031-.444007v-3.108049h-.8880062z"/><path d="m5.01279514 8.86111111-4.12478891 4.12601629v-2.0363887h-.88800623v3.1056036c0 .2450377.19877464.4436577.44400311.4436577h3.10802179v-.8873153h-2.03797429l4.12478892-4.12157971z"/></g></svg>
                Show all photos
            </div>
        </div>
      </div>
    </div>
</div>

<div class="simple-product-images-modal" id="modal-{{ section.id }}">
  <div class="modal-content">
      <span class="close" id="close-{{ section.id }}">&times;</span>
  <div class="image">
    <div id="slideshow-container">
      <img class="slideshow" id="image" src="" alt="Slideshow Image">
    </div>
    <div class="modal-buttons">
      <button id="prev-button">Previous</button>
      <button id="next-button">Next</button>
    </div>
   
    <!--
    {% for image in product.images %}
      <div>
          <img src="{{ image.src | image_url:  width: 2048 }}">
      </div>
  {% endfor %}
-->
  </div>
  </div>
</div>


<script>
  // Get the modal
  const modal = document.getElementById("modal-{{ section.id }}")

  // Get the button that opens the modal
  const btn = document.querySelector("#button-{{ section.id }}")

  // Get the <span> element that closes the modal
  const span = document.querySelector("#close-{{ section.id }}")

  // When the user clicks on the button, open the modal
  btn.onclick = function() {
   modal.style.display = "block";
  }

  // When the user clicks on <span> (x), close the modal
  span.onclick = function() {
  modal.style.display = "none";
  }

  // When the user clicks anywhere outside of the modal, close it
  window.onclick = function(event) {
  if (event.target == modal) {
      modal.style.display = "none";
    }
  }
</script>


<script>
  const images = [
    {% for image in product.images %}
      '{{ image.src | image_url:  width: 2048 }}'
      {% unless forloop.last %}
        ,
      {% else %}
      {% endunless %}
    {% endfor %}
  ];
  
  const slideshowContainer = document.getElementById('slideshow-container');
  const image = document.getElementById('image');
  const prevButton = document.getElementById('prev-button');
  const nextButton = document.getElementById('next-button');

  let currentIndex = 0;

  function showImage(index) {
    if (index < 0 || index >= images.length) {
      return;
    }

    image.src = images[index];
  }

  function prevImage() {
    currentIndex = (currentIndex - 1 + images.length) % images.length;
    showImage(currentIndex);
  }

  function nextImage() {
    currentIndex = (currentIndex + 1) % images.length;
    showImage(currentIndex);
  }

  prevButton.addEventListener('click', prevImage);
  nextButton.addEventListener('click', nextImage);

  showImage(currentIndex);
  slideshowContainer.style.display = 'block';
</script>

   {% schema %}
  {
     "name": "simple-product-images",
     "settings": [
        {
            "type": "image_picker",
            "id": "image",
            "label": "Image"
        },
        {
            "type": "text",
            "id": "tooltip",
            "label": "Tooltip",
            "default": "Photos are generic. They are not actual images of each unique product."
          }, 
      {
        "type": "range",
        "id": "padding_top",
        "min": 0,
        "max": 100,
        "step": 4,
        "unit": "px",
        "label": "t:sections.all.padding.padding_top",
        "default": 36
      },
      {
        "type": "range",
        "id": "padding_bottom",
        "min": 0,
        "max": 100,
        "step": 4,
        "unit": "px",
        "label": "t:sections.all.padding.padding_bottom",
        "default": 36
      }
     ],
     "presets": [
        {
            "name": "simple-product-images"
        }
     ]
  }
  {% endschema %}